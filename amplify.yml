version: 1
backend:
  phases:
    build:
      commands:
        - echo "Backend build phase - no backend changes needed"
frontend:
  phases:
    preBuild:
      runtime-versions:
        nodejs: 18
      commands:
        - echo "Installing dependencies..."
        - npm ci --only=production
    build:
      commands:
        - echo "Building centralized delivery platform..."
        - echo "Creating build directory..."
        - mkdir -p build
        - echo "Copying main files..."
        - cp index.html build/
        - cp login-aws-native.html build/
        - echo "Copying src subdirectories..."
        - cp -r src/pages build/ 2>/dev/null || true
        - cp -r src/utils build/ 2>/dev/null || true
        - cp -r src/components build/ 2>/dev/null || true
        - cp -r src/config build/ 2>/dev/null || true
        - echo "Ensuring all required files are present..."
        - ls -la build/
        - echo "Build completed successfully"
    postBuild:
      commands:
        - echo "Post-build verification..."
        - ls -la build/
        - echo "Centralized Platform built and ready for deployment!"
  artifacts:
    baseDirectory: build
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*