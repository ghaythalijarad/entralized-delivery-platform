version: 1
backend:
  phases:
    build:
      commands:
        - echo "Backend build phase - no backend changes needed"
frontend:
  phases:
    preBuild:
      runtime-versions:
        nodejs: 18
      commands:
        - echo "Installing dependencies..."
        - npm ci --only=production
    build:
      commands:
        - echo "Building application..."
        - echo "Creating build directory..."
        - mkdir -p build
        - echo "Copying src directory..."
        - cp -r src/* build/
        - echo "Copying assets directory..."
        - cp -r assets build/
        - echo "Copying root HTML files..."
        - cp index.html build/
        - cp login-aws-native.html build/
        - echo "Listing build directory contents..."
        - ls -la build
    postBuild:
      commands:
        - echo "Post-build verification..."
        - ls -la build/
        - echo "Centralized Platform built and ready for deployment!"
  artifacts:
    baseDirectory: build
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*