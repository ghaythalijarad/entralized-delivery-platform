<!DOCTYPE html>
<html lang="ar" dir="rtl" id="htmlRoot">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bilingual Test Page | صفحة اختبار ثنائية اللغة</title>
    <!-- Bilingual Support -->
    <script src="bilingual.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #00C1E8 0%, #0099CC 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #00C1E8;
        }
        
        [dir="ltr"] .test-section {
            border-left: none;
            border-right: 4px solid #00C1E8;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .test-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .test-item:hover {
            transform: translateY(-2px);
        }
        
        .page-links {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .page-link {
            background: #00C1E8;
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            transition: background 0.3s;
        }
        
        .page-link:hover {
            background: #5a6fd8;
            color: white;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 8px;
        }
        
        [dir="ltr"] .status-indicator {
            margin-left: 0;
            margin-right: 8px;
        }
        
        .status-online { background: #28a745; }
        .status-offline { background: #dc3545; }
        .status-pending { background: #ffc107; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 data-translate="common.title">Bilingual Test Page | صفحة اختبار ثنائية اللغة</h1>
            <p data-translate="common.description">Test all bilingual functionality across the platform | اختبار جميع وظائف اللغة المزدوجة عبر المنصة</p>
        </div>

        <div class="test-section">
            <h3 data-translate="test.basicFunctionality">Basic Functionality | الوظائف الأساسية</h3>
            <div class="test-grid">
                <div class="test-item">
                    <h5 data-translate="test.languageSwitch">Language Switch</h5>
                    <p data-translate="test.switchDescription">Click buttons above to test</p>
                    <span class="status-indicator status-online"></span>
                    <span data-translate="test.working">Working</span>
                </div>
                <div class="test-item">
                    <h5 data-translate="test.textDirection">Text Direction</h5>
                    <p data-translate="test.directionDescription">RTL/LTR automatic</p>
                    <span class="status-indicator status-online"></span>
                    <span data-translate="test.working">Working</span>
                </div>
                <div class="test-item">
                    <h5 data-translate="test.persistence">Language Persistence</h5>
                    <p data-translate="test.persistenceDescription">Saves preference</p>
                    <span class="status-indicator status-online"></span>
                    <span data-translate="test.working">Working</span>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3 data-translate="test.serverConnection">Server Connection | اتصال الخادم</h3>
            <div class="test-grid">
                <div class="test-item">
                    <h5 data-translate="test.localServer">Local Server</h5>
                    <p>http://localhost:8002</p>
                    <span class="status-indicator" id="localServerStatus"></span>
                    <span id="localServerText" data-translate="test.checking">Checking...</span>
                </div>
                <div class="test-item">
                    <h5 data-translate="test.awsLambda">AWS Lambda</h5>
                    <p>Production API</p>
                    <span class="status-indicator" id="lambdaServerStatus"></span>
                    <span id="lambdaServerText" data-translate="test.checking">Checking...</span>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3 data-translate="test.pageNavigation">Page Navigation | التنقل بين الصفحات</h3>
            <p data-translate="test.navigationDescription">Test bilingual support across all pages | اختبار الدعم ثنائي اللغة عبر جميع الصفحات</p>
            
            <div class="page-links">
                <a href="index.html" class="page-link" data-translate="navigation.login">Login | تسجيل الدخول</a>
                <a href="dashboard.html" class="page-link" data-translate="navigation.dashboard">Dashboard | لوحة التحكم</a>
                <a href="fastapi-template/static/orders.html" class="page-link" data-translate="navigation.orders">Orders | الطلبات</a>
                <a href="fastapi-template/static/drivers.html" class="page-link" data-translate="navigation.drivers">Drivers | السائقون</a>
                <a href="fastapi-template/static/merchants.html" class="page-link" data-translate="navigation.merchants">Merchants | التجار</a>
                <a href="fastapi-template/static/customers.html" class="page-link" data-translate="navigation.customers">Customers | العملاء</a>
                <a href="fastapi-template/static/user-management.html" class="page-link" data-translate="navigation.users">Users | المستخدمون</a>
                <a href="fastapi-template/static/settings.html" class="page-link" data-translate="navigation.settings">Settings | الإعدادات</a>
            </div>
        </div>

        <div class="test-section">
            <h3 data-translate="test.commonTexts">Common Translations Test | اختبار الترجمات الشائعة</h3>
            <div class="test-grid">
                <div class="test-item">
                    <span data-translate="common.loading">Loading...</span>
                </div>
                <div class="test-item">
                    <span data-translate="common.save">Save</span>
                </div>
                <div class="test-item">
                    <span data-translate="common.cancel">Cancel</span>
                </div>
                <div class="test-item">
                    <span data-translate="common.delete">Delete</span>
                </div>
                <div class="test-item">
                    <span data-translate="common.edit">Edit</span>
                </div>
                <div class="test-item">
                    <span data-translate="common.search">Search</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Custom translations for test page
        if (window.bilingualManager) {
            // Add test-specific translations
            window.bilingualManager.translations = {
                ...window.bilingualManager.translations,
                common: {
                    ...window.bilingualManager.translations.common,
                    title: { ar: 'صفحة اختبار ثنائية اللغة', en: 'Bilingual Test Page' },
                    description: { ar: 'اختبار جميع وظائف اللغة المزدوجة عبر المنصة', en: 'Test all bilingual functionality across the platform' }
                },
                test: {
                    basicFunctionality: { ar: 'الوظائف الأساسية', en: 'Basic Functionality' },
                    languageSwitch: { ar: 'تبديل اللغة', en: 'Language Switch' },
                    switchDescription: { ar: 'انقر على الأزرار أعلاه للاختبار', en: 'Click buttons above to test' },
                    textDirection: { ar: 'اتجاه النص', en: 'Text Direction' },
                    directionDescription: { ar: 'تلقائي من اليمين لليسار/من اليسار لليمين', en: 'RTL/LTR automatic' },
                    persistence: { ar: 'استمرارية اللغة', en: 'Language Persistence' },
                    persistenceDescription: { ar: 'يحفظ التفضيل', en: 'Saves preference' },
                    working: { ar: 'يعمل', en: 'Working' },
                    serverConnection: { ar: 'اتصال الخادم', en: 'Server Connection' },
                    localServer: { ar: 'الخادم المحلي', en: 'Local Server' },
                    awsLambda: { ar: 'AWS Lambda', en: 'AWS Lambda' },
                    checking: { ar: 'جاري التحقق...', en: 'Checking...' },
                    pageNavigation: { ar: 'التنقل بين الصفحات', en: 'Page Navigation' },
                    navigationDescription: { ar: 'اختبار الدعم ثنائي اللغة عبر جميع الصفحات', en: 'Test bilingual support across all pages' },
                    commonTexts: { ar: 'اختبار الترجمات الشائعة', en: 'Common Translations Test' }
                },
                navigation: {
                    login: { ar: 'تسجيل الدخول', en: 'Login' },
                    dashboard: { ar: 'لوحة التحكم', en: 'Dashboard' },
                    orders: { ar: 'الطلبات', en: 'Orders' },
                    drivers: { ar: 'السائقون', en: 'Drivers' },
                    merchants: { ar: 'التجار', en: 'Merchants' },
                    customers: { ar: 'العملاء', en: 'Customers' },
                    users: { ar: 'المستخدمون', en: 'Users' },
                    settings: { ar: 'الإعدادات', en: 'Settings' }
                }
            };
        }

        // Check server status
        async function checkServerStatus() {
            try {
                const response = await fetch('http://localhost:8002/health');
                if (response.ok) {
                    document.getElementById('localServerStatus').className = 'status-indicator status-online';
                    document.getElementById('localServerText').textContent = window.bilingualManager?.getText('test', 'working') || 'Working';
                } else {
                    document.getElementById('localServerStatus').className = 'status-indicator status-offline';
                    document.getElementById('localServerText').textContent = 'Error';
                }
            } catch (error) {
                document.getElementById('localServerStatus').className = 'status-indicator status-offline';
                document.getElementById('localServerText').textContent = 'Offline';
            }

            try {
                const response = await fetch('https://l17hfioxt7.execute-api.eu-north-1.amazonaws.com/api/health');
                if (response.ok) {
                    document.getElementById('lambdaServerStatus').className = 'status-indicator status-online';
                    document.getElementById('lambdaServerText').textContent = window.bilingualManager?.getText('test', 'working') || 'Working';
                } else {
                    document.getElementById('lambdaServerStatus').className = 'status-indicator status-offline';
                    document.getElementById('lambdaServerText').textContent = 'Error';
                }
            } catch (error) {
                document.getElementById('lambdaServerStatus').className = 'status-indicator status-offline';
                document.getElementById('lambdaServerText').textContent = 'Offline';
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkServerStatus();
        });

        // Listen for language changes to update server status text
        window.addEventListener('languageChanged', function() {
            setTimeout(checkServerStatus, 100);
        });
    </script>
</body>
</html>
