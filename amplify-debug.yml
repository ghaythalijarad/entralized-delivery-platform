version: 1
frontend:
  phases:
    preBuild:
      runtime-versions:
        nodejs: 18
      commands:
        - echo "Starting build process..."
        - npm --version
        - node --version
        - pwd
        - ls -la
    build:
      commands:
        - echo "Building application..."
        - echo "Creating build directory..."
        - mkdir -p public
        - echo "Copying files..."
        - cp index.html public/ || echo "index.html not found"
        - cp login-aws-native.html public/ || echo "login file not found"
        - echo "Copying src directory..."
        - cp -r src public/ || echo "src directory not found"
        - cp -r assets public/ || echo "assets directory not found"
        - echo "Listing public directory contents..."
        - ls -la public/
        - echo "Build completed"
    postBuild:
      commands:
        - echo "Post-build phase"
        - echo "Final directory structure:"
        - find public -type f | head -20
  artifacts:
    baseDirectory: public
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
